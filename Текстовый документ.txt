Ruslan, [21.01.2026 15:30]
4.1 Личный чат (1:1)
4.1.1 Возможность выбора сотрудника из списка
Система должна предоставлять пользователю возможность выбрать сотрудника для начала общения.
Требования:
1.  В интерфейсе должен быть доступен раздел/кнопка «Новый чат» или поле «Поиск сотрудника».
2.  Список сотрудников отображается в виде карточек/строк со следующими данными:
o  ФИО сотрудника
o  логин (при наличии)
o  отдел/подразделение (если доступно)
3.  Пользователь должен иметь возможность выполнить поиск сотрудника:
o  по ФИО (частичное совпадение)
o  по логину (частичное совпадение)
4.  При выборе сотрудника из списка система должна:
o  либо открыть уже существующий чат 1:1
o  либо создать новый чат 1:1 автоматически
Ограничение MVL:
•  отображаются только сотрудники, которые активированы (вошли в систему хотя бы 1 раз), если включена данная политика.
4.1.2 Создание диалога формата 1:1
Диалог типа 1:1 должен автоматически создаваться между двумя пользователями и быть уникальным.
Требования:
1.  Между одной парой сотрудников может существовать только один чат 1:1.
2.  При создании чата система должна:
o  сохранить запись чата в базе данных
o  добавить двух участников
3.  При повторном выборе того же сотрудника должен открываться уже существующий чат.
Поведение при создании:
•  чат создаётся без подтверждений и лишних шагов
•  сразу открывается окно переписки
4.1.3 Отправка текстовых сообщений
Система должна предоставлять возможность отправки текстовых сообщений в чате 1:1.
Элементы интерфейса:
•  поле ввода сообщения (Input / Textarea)
•  кнопка «Отправить» (иконка или текст)
•  область отображения переписки
Требования к отправке:
1.  Пользователь должен иметь возможность отправить сообщение двумя способами:
o  нажатием на кнопку «Отправить»
o  нажатием клавиши Enter
2.  Перенос строки в сообщении должен выполняться сочетанием:
o  Shift + Enter
3.  Сообщение не должно отправляться, если:
o  текст пустой
o  текст содержит только пробелы
4.  После успешной отправки:
o  поле ввода очищается
o  сообщение появляется в чате у отправителя
o  сообщение сохраняется в базу данных
Требования к длине:
•  максимальная длина одного сообщения (например): до 2000 символов
(значение может быть изменено на уровне конфигурации)
Ошибки отправки:
1.  При ошибке отправки сообщение не должно пропадать из поля ввода.
2.  Пользователь должен получить уведомление:
o  “Не удалось отправить сообщение. Повторите попытку.”
3.  Должна быть доступна повторная отправка после восстановления соединения.
4.1.4 Получение сообщений в режиме реального времени
Система должна обеспечивать получение новых сообщений без перезагрузки страницы.
Требования:
1.  При открытом чате, новые сообщения должны отображаться автоматически (real-time).
2.  Для реализации используется WebSocket (например, STOMP).
3.  При получении нового сообщения система должна:
o  добавить сообщение в текущую переписку
o  обновить список чатов (последнее сообщение/время)
4.  Если чат не открыт, но сообщение пришло:
o  в списке чатов должна появиться отметка (например, бейдж “1”)
o  чат перемещается вверх списка как “активный”
Поведение при потере соединения:
1.  При временном обрыве WebSocket:
o  должна выполняться попытка автоматического переподключения
2.  После восстановления соединения:
o  чат должен подгрузить пропущенные сообщения из истории
4.1.5 Сохранение истории переписки
Все сообщения должны сохраняться и быть доступны при повторном входе пользователя.
Требования:
1.  При открытии чата система загружает историю сообщений из базы данных.
2.  История должна отображаться в хронологическом порядке:
o  сверху старые
o  снизу новые
3.  При открытии чата пользователь должен попадать в конец переписки (последние сообщения).
4.  Должна быть реализована подгрузка истории (минимум):
o  загрузка последних N сообщений (например 50)
o  при прокрутке вверх — догрузка предыдущих сообщений (опционально для MVL)
Сохранение в БД:
•  сохраняются:
o  автор сообщения
o  текст сообщения
o  дата и время
o  чат (1:1)
4.1.6 Ответ на сообщение (Reply)

Ruslan, [21.01.2026 15:30]
Система должна позволять пользователю отвечать на конкретное сообщение внутри чата 1:1.
Требования к интерфейсу:
1.  В каждом сообщении должна быть возможность выбрать действие «Ответить»:
•  кнопка рядом с сообщением
или
•  действие по правому клику / меню “…” (если используется)
2.  При выборе “Ответить”:
•  над полем ввода появляется блок “Ответ на сообщение”
•  блок содержит:
o  имя автора исходного сообщения
o  часть текста исходного сообщения (например первые 30–50 символов)
3.  Пользователь может отменить ответ:
•  нажатием на крестик “×” в блоке ответа
Отправка reply-сообщения:
1.  После отправки сообщение должно отображаться как обычное, но с “вложенной ссылкой”:
•  сверху маленький блок “Ответ на: …”
2.  При нажатии на исходное сообщение (опционально):
•  выполняется прокрутка к оригиналу (если оно в истории)
Хранение reply:
•  в базе данных у сообщения должна быть ссылка replyToMessageId (nullable)

Ruslan, [21.01.2026 15:32]
4.3 Групповые чаты
4.3.1 Создание группового чата

Система должна предоставлять пользователю возможность создать групповой чат для общения нескольких сотрудников.

Требования:

В интерфейсе должна быть кнопка/раздел «Создать групповой чат» (например, через кнопку “+” или “Новый чат”).

При создании группового чата пользователь обязан указать:

Название чата (обязательное поле, например 3–50 символов)

Пользователь должен иметь возможность выбрать участников из списка сотрудников:

путём поиска по ФИО/логину

путём выбора из предложенного списка

После подтверждения создания:

групповой чат создаётся в системе

выбранные участники добавляются в чат

пользователь, который создал чат, назначается администратором чата (Chat Admin)

Ошибки и ограничения:

чат нельзя создать без названия

чат нельзя создать без участников (минимум 2 участника кроме создателя, либо минимум 2 человека всего — по правилам компании)

запрещены дублирующиеся названия не критично (допускается одинаковое имя, но разные чаты)

4.3.2 Добавление участников в групповой чат

Система должна позволять добавлять новых сотрудников в уже созданный групповой чат.

Требования:

Добавлять участников может:

администратор чата
(или все участники — если включён упрощённый режим MVL)

В чате должна быть функция «Добавить участника»:

открывается список сотрудников

доступен поиск

После добавления участника:

участник получает доступ к чату

чат появляется в его списке чатов

история сообщений становится доступной после добавления

4.3.3 Удаление участников из группового чата

Система должна позволять удалять участников из группового чата.

Требования:

Удалять участников может:

администратор чата

В списке участников должна быть кнопка «Удалить» напротив каждого сотрудника.

После удаления участника:

чат исчезает из списка чатов удалённого пользователя

пользователь теряет доступ к переписке данного чата

Ограничения:

администратор не может удалить самого себя, если он единственный администратор
(опционально: админ должен сначала назначить другого)

4.3.4 Отправка сообщений внутри группы

Система должна обеспечивать отправку текстовых сообщений в групповой чат.

Требования к отправке:

Сообщение отправляется:

по нажатию кнопки «Отправить»

по нажатию Enter

Перенос строки:

Shift+Enter

Сообщение не отправляется если:

пустое

состоит только из пробелов

После успешной отправки:

сообщение появляется в переписке у всех участников

сообщение сохраняется в БД

поле ввода очищается

4.3.5 Получение сообщений внутри группы

Система должна обеспечивать получение сообщений в режиме реального времени без перезагрузки страницы.

Требования:

Новые сообщения отображаются автоматически (real-time).

При поступлении сообщения:

сообщение появляется в окне чата

список чатов обновляется (чат поднимается вверх)

Если чат не открыт, но пришло сообщение:

отображается индикатор непрочитанных (например “•” или “1”)

4.3.6 Отображение списка доступных чатов пользователя

Система должна отображать пользователю список всех доступных ему чатов.

Требования:

В левой панели/разделе “Чаты” отображаются:

личные чаты 1:1

групповые чаты

Для каждого чата отображается:

название чата (или ФИО сотрудника для 1:1)

последнее сообщение (кратко)

время последней активности

При выборе чата:

открывается переписка

подгружается история сообщений

4.3.7 Ответ на конкретное сообщение (Reply)

Система должна поддерживать функцию ответа на конкретное сообщение в рамках группового чата.

Требования:

У каждого сообщения должна быть кнопка «Ответить» (Reply):

через кнопку рядом с сообщением
или

через меню “…”

При выборе Reply:

над полем ввода появляется блок “Ответ на сообщение”

блок содержит:

имя автора исходного сообщения

часть текста исходного сообщения (первые 30–50 символов)

Пользователь может отменить Reply:

нажатием на крестик “×”

После отправки сообщения с Reply:

новое сообщение отображается с прикреплённым блоком ответа

указывается ссылка на исходное сообщение (replyToMessageId)

Сохранение Reply в базе данных:

у сообщения должно быть поле replyToMessageId (nullable)